{% extends "core/base.html" %}
{% load static %}


{% block content %}

<div class="specialist-dashboard-container">
    <h1>Welcome, {{ user.first_name }}</h1>

    <!-- Profile Section -->
    <div class="profile-section">
        {% if profile.profile_image %}
            <img src="{{ profile.profile_image.url }}" alt="Profile Image" width="150px" class="profile-img">
        {% else %}
            <img src="{% static 'img/default-profile.png' %}" alt="Default Profile Image" width="150px" class="profile-img">
        {% endif %}
        <p>Welcome, {{ user.get_full_name }}</p>
        <a href="{% url 'specialist_profile' %}">See your profile</a>
    </div>

    <!-- Quick Links Section -->
    <div class="quick-links">
        <h2>Quick Links</h2>
        <ul>
            <li><a href="{% url 'specialist_appointments' %}">Manage Appointments</a></li>
            <li><a href="#">View Patient Details</a></li>
            <li><a href="#">Messages</a></li>
            <li><a href="#">Settings</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <h2>Specialist Dashboard</h2>
        <p>Here you can manage your appointments, view patient details, and more.</p>
    </div>

    <section class="dashboard-stats">
        <div class="stat-item">
            <h3>Total Appointments</h3>
            <p>5</p> <!-- With time I will replace with dynamic data -->
        </div>
        
        <div class="stat-item">
            <h3>Patients Today</h3>
            <p>3</p> <!-- With time I will replace with dynamic data -->
        </div>
    </section>

        <!-- Upcoming Appointments Section -->
        <section class="appointments-section">
            <h2>Upcoming Appointments</h2>
            {% if upcoming_appointments %}
                <ul>
                    {% for appointment in upcoming_appointments %}
                        <li>
                            Appointment with {{ appointment.patient.user.get_full_name }} on 
                            {{ appointment.date }} at {{ appointment.time }}
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No upcoming appointments.</p>
            {% endif %}
            <a href="{% url 'specialist_appointments' %}">View All Appointments</a>
    </section>

         <!-- Set Availability -->
    <section class="availability-section">
        <h2>Set Your Availability</h2>
        <form method="POST">
            {% csrf_token %}
            {{ availability_form.as_p }}
            <button type="submit">Submit</button>
        </form>
    </section>

    <!-- View Availability -->
    <section class="view-availability-section">
        <h2>Your Availability</h2>
        {% if availabilities %}
            <ul>
                {% for availability in availabilities %}
                    <li>{{ availability.date }}: {{ availability.start_time }} - {{ availability.end_time }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>You have not set any availability yet.</p>
        {% endif %}
    </section>

    <!-- Notifications Section -->
    <section class="notifications">
        <h2>Notifications</h2>
        <div class="notification-item">
            <p>You have no new notifications.</p> <!-- With time I will replace with dynamic data -->
        </div>
    </section>
</div>

{% endblock %}
